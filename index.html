<!DOCTYPE html>
<html lang="tr" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1a1a2e">
    <title>üíé Kristal Madencisi</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon.png">

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@300;400;500;600;700;800&amp;family=Noto+Sans:wght@400;500;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#2bee79",
                        "background-light": "#f6f8f7",
                        "background-dark": "#102217",
                    },
                    fontFamily: {
                        "display": ["Spline Sans", "sans-serif"],
                        "body": ["Noto Sans", "sans-serif"],
                    },
                    borderRadius: { "DEFAULT": "1rem", "lg": "2rem", "xl": "3rem", "full": "9999px" },
                    backgroundImage: {
                        'gold-gradient': 'linear-gradient(180deg, #FCD34D 0%, #D97706 100%)',
                        'glass-gradient': 'linear-gradient(180deg, rgba(255, 255, 255, 0.10) 0%, rgba(255, 255, 255, 0.05) 100%)',
                    }
                },
            },
        }
    </script>

    <!-- Custom Game Styles -->
    <link rel="stylesheet" href="style.css">

    <style>
        /* Custom particle positioning for the static mockup */
        .particle {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.6;
            pointer-events: none;
        }

        .text-glow {
            text-shadow: 0 0 20px rgba(43, 238, 121, 0.4), 0 0 40px rgba(43, 238, 121, 0.2);
        }

        .diamond-facet {
            background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.05) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.05) 50%, rgba(255, 255, 255, 0.05) 75%, transparent 75%, transparent);
            background-size: 4px 4px;
        }

        /* Ensure game screens are hidden by default via style.css, but this section handles it */
        .screen {
            display: none;
        }

        .screen.active {
            display: flex;
        }
    </style>
</head>

<body class="bg-[#0f0f23] text-white font-display overflow-hidden selection:bg-primary selection:text-black">
    <div class="game-container !max-w-none !w-full !p-0 !m-0 !bg-transparent !shadow-none !border-none">

        <!-- Start Screen (New Design) -->
        <section id="start-screen"
            class="screen active w-full h-screen relative flex-col bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-[#1a1a2e] via-[#0f0f23] to-[#050510]">
            <!-- Background Elements -->
            <div class="absolute inset-0 overflow-hidden pointer-events-none">
                <div class="particle w-1 h-1 top-1/4 left-1/4 blur-[1px]"></div>
                <div class="particle w-2 h-2 top-1/3 right-1/4 blur-[2px] opacity-30"></div>
                <div class="particle w-1 h-1 top-2/3 left-1/3 blur-[1px]"></div>
                <div class="particle w-1.5 h-1.5 bottom-1/4 right-1/3 blur-[1px] opacity-40"></div>
                <!-- Glow Orb -->
                <div
                    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[100px]">
                </div>
            </div>

            <!-- Top Navigation / User HUD -->
            <header class="relative z-20 w-full px-6 py-6 flex justify-center">
                <div
                    class="flex items-center gap-4 p-2 pr-6 rounded-full bg-glass-gradient backdrop-blur-md border border-white/10 shadow-lg">
                    <!-- Avatar -->
                    <div class="w-12 h-12 rounded-full border-2 border-primary/30 bg-cover bg-center shadow-[0_0_15px_rgba(43,238,121,0.3)]"
                        style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuDXBEH7dUY-wZVcFfBIWCyEeW6F4eywN2BBr_o7Y2-0HCMHn3rirHe8z8QlzscFza9YD0XLb41R4sk_au0xG7WkVR1ZBI3p5boIIPnAEU1OCKnDXuZ3uxhJ8JP-yWf3K5TAF-xUvF11uobVhN3uf87ts6_O4YS18C659lXV8T2h1uw3BlLSU4K9taSGOEyjuRMyHpQS0YcFiN_sjNR4Z8CxI9z7JdMZk_m5eRGbj0wPj4RW3iGpYmg-x7G5q7qrYz0bPWzKVBZK_Mxo');">
                    </div>
                    <!-- User Stats -->
                    <div class="flex flex-col gap-1 min-w-[160px]">
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-bold tracking-wide text-white">SpaceMiner_99</span>
                            <span
                                class="text-[10px] font-bold px-2 py-0.5 rounded-full bg-primary/20 text-primary border border-primary/20">LVL
                                <span id="player-level">1</span></span>
                        </div>
                        <!-- XP Progress Bar -->
                        <div class="w-full h-1.5 bg-[#0f0f23]/50 rounded-full overflow-hidden border border-white/5">
                            <div id="xp-bar"
                                class="h-full bg-primary shadow-[0_0_10px_rgba(43,238,121,0.8)] rounded-full transition-all duration-500"
                                style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between text-[10px] text-gray-400 font-medium">
                            <span id="xp-text">0 / 100 XP</span>
                            <!-- Removed Static 1000 XP max text to let JS handle it, or keep dynamic -->
                        </div>
                    </div>
                    <!-- Currency -->
                    <div class="pl-4 border-l border-white/10 flex items-center gap-2">
                        <span class="material-symbols-outlined text-yellow-400 text-[20px]">diamond</span>
                        <span class="text-sm font-bold text-yellow-100">2,450</span>
                    </div>
                </div>
            </header>

            <!-- Main Content Area -->
            <main class="relative z-10 flex-grow flex flex-col items-center justify-center p-6 gap-12">
                <!-- Game Title -->
                <div class="flex flex-col items-center gap-2 text-center">
                    <div class="relative">
                        <h1
                            class="text-6xl md:text-8xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-white via-cyan-50 to-cyan-200 drop-shadow-2xl text-glow diamond-facet pb-2">
                            CRYSTAL
                            <br />
                            MINER
                        </h1>
                        <span
                            class="material-symbols-outlined absolute -top-4 -right-8 text-primary text-4xl animate-pulse">auto_awesome</span>
                        <span
                            class="material-symbols-outlined absolute bottom-4 -left-8 text-cyan-300 text-2xl animate-pulse">auto_awesome</span>
                    </div>
                    <p class="text-cyan-200/60 text-lg font-medium tracking-[0.2em] uppercase">Uzay Bulmaca
                        Macerasƒ±</p>
                </div>

                <!-- Primary CTA -->
                <div class="relative group">
                    <div
                        class="absolute -inset-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full blur opacity-25 group-hover:opacity-50 transition duration-200">
                    </div>
                    <!-- Start Button (Mapped ID) -->
                    <button id="start-btn"
                        class="relative flex items-center justify-center gap-3 px-10 py-5 min-w-[280px] rounded-full bg-gold-gradient shadow-[0_4px_0_rgb(180,83,9),0_15px_20px_rgba(0,0,0,0.4)] transform active:translate-y-[2px] active:shadow-none transition-all duration-100 border-t border-yellow-200 cursor-pointer">
                        <span
                            class="material-symbols-outlined text-orange-900 text-[32px] font-bold">construction</span>
                        <span class="text-xl font-black text-orange-950 tracking-wide">KAZIYA BA≈ûLA</span>
                    </button>
                </div>

                <!-- Secondary Navigation -->
                <div class="flex gap-4 flex-wrap justify-center">
                    <button id="achievements-btn"
                        class="flex items-center gap-2 px-6 py-3 rounded-full bg-glass-gradient border border-white/10 backdrop-blur-md hover:bg-white/10 transition-colors text-white font-bold text-sm tracking-wide shadow-lg group cursor-pointer">
                        <span
                            class="material-symbols-outlined text-primary group-hover:text-white transition-colors">trophy</span>
                        BA≈ûARILAR
                    </button>
                    <button id="settings-btn"
                        class="flex items-center gap-2 px-6 py-3 rounded-full bg-glass-gradient border border-white/10 backdrop-blur-md hover:bg-white/10 transition-colors text-white font-bold text-sm tracking-wide shadow-lg group cursor-pointer">
                        <span
                            class="material-symbols-outlined text-cyan-300 group-hover:text-white transition-colors">settings</span>
                        AYARLAR
                    </button>
                    <button
                        class="flex items-center gap-2 px-6 py-3 rounded-full bg-glass-gradient border border-white/10 backdrop-blur-md hover:bg-white/10 transition-colors text-white font-bold text-sm tracking-wide shadow-lg group cursor-pointer">
                        <span
                            class="material-symbols-outlined text-purple-300 group-hover:text-white transition-colors">storefront</span>
                        MAƒûAZA
                    </button>
                </div>
            </main>

            <!-- Footer Info -->
            <footer class="relative z-10 w-full p-6 text-center">
                <p class="text-xs text-white/20 font-medium tracking-widest">S√úR√úM 1.0.4 ‚Ä¢ ID: 8823-XJ</p>
            </footer>
        </section>

        <!-- Mode Selection Screen -->
        <section id="mode-screen"
            class="screen w-full h-screen relative flex-col bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-[#1a1a2e] via-[#0f0f23] to-[#050510]">
            <!-- Background Elements -->
            <div class="absolute inset-0 overflow-hidden pointer-events-none">
                <div class="particle w-1 h-1 top-1/4 left-1/4 blur-[1px]"></div>
                <div class="particle w-2 h-2 top-1/3 right-1/4 blur-[2px] opacity-30"></div>
                <div class="particle w-1 h-1 top-2/3 left-1/3 blur-[1px]"></div>
                <div class="particle w-1.5 h-1.5 bottom-1/4 right-1/3 blur-[1px] opacity-40"></div>
                <!-- Glow Orb -->
                <div
                    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[100px]">
                </div>
            </div>

            <!-- Main Content -->
            <main class="relative z-10 flex-grow flex flex-col items-center justify-center p-6 gap-8">
                <!-- Title -->
                <div class="text-center mb-4">
                    <h2 class="text-4xl md:text-5xl font-black text-white mb-3 text-glow">Oyun Modu Se√ßin</h2>
                    <p class="text-gray-400 text-sm md:text-base">Nasƒ±l oynamak istersiniz?</p>
                </div>

                <!-- Mode Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-4xl">
                    <!-- Student Mode Card -->
                    <button id="student-mode-btn"
                        class="group relative glass-panel rounded-3xl p-8 hover:bg-white/10 transition-all duration-300 active:scale-95 border border-white/10 hover:border-cyan-400/50 cursor-pointer text-left overflow-hidden">
                        <!-- Glow Effect -->
                        <div
                            class="absolute top-0 right-0 w-32 h-32 bg-cyan-400/10 rounded-full blur-xl -mr-16 -mt-16 transition-all group-hover:bg-cyan-400/20">
                        </div>

                        <!-- Content -->
                        <div class="relative z-10">
                            <!-- Icon -->
                            <div
                                class="w-20 h-20 rounded-2xl bg-gradient-to-br from-cyan-400/20 to-blue-500/20 border border-cyan-400/30 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                                <span class="material-symbols-outlined text-cyan-400 text-5xl">school</span>
                            </div>

                            <!-- Title -->
                            <h3 class="text-2xl font-bold text-white mb-3 group-hover:text-cyan-400 transition-colors">
                                √ñƒürenci Modu
                            </h3>

                            <!-- Description -->
                            <p class="text-gray-400 text-sm mb-4 leading-relaxed">
                                Kendi ilerlemenizi takip edin. Ba≈üarƒ±mlar, yƒ±ldƒ±zlar ve XP kazanƒ±n. T√ºm verileriniz
                                kaydedilir ve her zaman devam edebilirsiniz.
                            </p>

                            <!-- Features -->
                            <ul class="space-y-2 text-xs text-gray-500">
                                <li class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-primary text-sm">check_circle</span>
                                    ƒ∞lerleme Kaydedilir
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-primary text-sm">check_circle</span>
                                    Ba≈üarƒ±mlar Kazanƒ±lƒ±r
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-primary text-sm">check_circle</span>
                                    Yƒ±ldƒ±zlar ve XP Sistemi
                                </li>
                            </ul>
                        </div>

                        <!-- Arrow -->
                        <div
                            class="absolute bottom-8 right-8 opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all">
                            <span class="material-symbols-outlined text-cyan-400 text-3xl">arrow_forward</span>
                        </div>
                    </button>

                    <!-- Teacher Mode Card -->
                    <button id="teacher-mode-btn"
                        class="group relative glass-panel rounded-3xl p-8 hover:bg-white/10 transition-all duration-300 active:scale-95 border border-white/10 hover:border-orange-400/50 cursor-pointer text-left overflow-hidden">
                        <!-- Glow Effect -->
                        <div
                            class="absolute top-0 right-0 w-32 h-32 bg-orange-400/10 rounded-full blur-xl -mr-16 -mt-16 transition-all group-hover:bg-orange-400/20">
                        </div>

                        <!-- Content -->
                        <div class="relative z-10">
                            <!-- Icon -->
                            <div
                                class="w-20 h-20 rounded-2xl bg-gradient-to-br from-orange-400/20 to-yellow-500/20 border border-orange-400/30 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                                <span
                                    class="material-symbols-outlined text-orange-400 text-5xl">workspace_premium</span>
                            </div>

                            <!-- Title -->
                            <h3
                                class="text-2xl font-bold text-white mb-3 group-hover:text-orange-400 transition-colors">
                                √ñƒüretmen Modu
                            </h3>

                            <!-- Description -->
                            <p class="text-gray-400 text-sm mb-4 leading-relaxed">
                                Sƒ±nƒ±fƒ±nƒ±zda birden fazla √∂ƒürenciye oynatƒ±n. Anlƒ±k skor tablosu g√∂r√ºn. Veriler
                                kaydedilmez,
                                tarayƒ±cƒ± kapanƒ±nca sƒ±fƒ±rlanƒ±r.
                            </p>

                            <!-- Features -->
                            <ul class="space-y-2 text-xs text-gray-500">
                                <li class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-primary text-sm">check_circle</span>
                                    Anlƒ±k Skor Tablosu
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-primary text-sm">check_circle</span>
                                    Veri Kaydedilmez
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-primary text-sm">check_circle</span>
                                    Oturum Bazlƒ±
                                </li>
                            </ul>
                        </div>

                        <!-- Arrow -->
                        <div
                            class="absolute bottom-8 right-8 opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all">
                            <span class="material-symbols-outlined text-orange-400 text-3xl">arrow_forward</span>
                        </div>
                    </button>
                </div>

                <!-- Back Button -->
                <button id="mode-back-btn"
                    class="mt-4 flex items-center gap-2 px-6 py-3 rounded-full bg-glass-gradient border border-white/10 backdrop-blur-md hover:bg-white/10 transition-colors text-white font-bold text-sm tracking-wide shadow-lg cursor-pointer">
                    <span class="material-symbols-outlined">arrow_back</span>
                    Ana Men√º
                </button>
            </main>
        </section>

        <!-- Level Selection -->
        <section id="level-screen" class="screen">
            <h2>üèîÔ∏è Maden Katmanlarƒ±</h2>
            <div class="level-grid" id="level-grid"></div>
            <button id="back-btn" class="btn-back">‚¨Ö GERƒ∞</button>
        </section>

        <!-- Game Screen -->
        <section id="game-screen"
            class="screen !flex-col !h-screen !max-h-screen !max-w-none !w-full !m-0 !p-0 bg-gradient-to-br from-[#0f0f23] to-[#1a1a2e]">
            <!-- Background Decoration -->
            <div class="fixed inset-0 pointer-events-none z-0">
                <div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-900/20 rounded-full blur-[120px]">
                </div>
                <div
                    class="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-900/20 rounded-full blur-[120px]">
                </div>
                <div class="absolute top-[20%] right-[20%] w-[20%] h-[20%] bg-primary/10 rounded-full blur-[100px]">
                </div>
                <div class="absolute inset-0 bg-grid-pattern opacity-20"></div>
            </div>

            <!-- Header / HUD -->
            <header class="flex-none p-6 pt-8 w-full max-w-[1400px] mx-auto relative z-10">
                <div class="grid grid-cols-1 md:grid-cols-12 gap-6 items-stretch">
                    <!-- Left: Score Panel -->
                    <div
                        class="md:col-span-3 glass-panel rounded-2xl p-5 flex flex-col justify-center relative overflow-hidden group">
                        <div id="timer" class="absolute top-2 right-2 text-sm font-mono text-gray-400">00:00</div>
                        <button id="ingame-settings-btn"
                            class="absolute top-2 left-2 p-2 rounded-lg hover:bg-white/10 transition-colors text-gray-400 hover:text-white">
                            <span class="material-symbols-outlined text-[20px]">settings</span>
                        </button>
                        <div
                            class="absolute top-0 right-0 w-20 h-20 bg-accent-cyan/10 rounded-full blur-xl -mr-10 -mt-10 transition-all group-hover:bg-accent-cyan/20">
                        </div>
                        <div class="flex items-center justify-between mb-2 mt-8">
                            <div
                                class="flex items-center gap-2 text-gray-300 text-sm font-semibold uppercase tracking-wider">
                                <span class="material-symbols-outlined text-accent-cyan text-[20px]">diamond</span>
                                Skor
                            </div>
                            <div id="combo"
                                class="combo-indicator flex items-center gap-1 text-orange-400 font-bold opacity-0 transition-opacity">
                                <span class="material-symbols-outlined text-[20px] fill-1">local_fire_department</span>
                                x<span id="combo-value">0</span> Kombo
                            </div>
                        </div>
                        <div id="score-container"
                            class="text-4xl font-bold text-white tracking-tight drop-shadow-[0_0_10px_rgba(255,255,255,0.3)]">
                            <span id="score">0</span>
                        </div>
                    </div>

                    <!-- Center: Mission Panel -->
                    <div class="md:col-span-6 glass-panel rounded-2xl p-4 flex flex-col justify-center relative">
                        <div class="flex items-center justify-between px-2 mb-1">
                            <span class="text-gray-400 text-sm font-medium">Mevcut G√∂rev</span>
                            <span class="text-primary text-sm font-bold">Seviye 4</span>
                        </div>
                        <div id="mission" class="flex items-end gap-4 mb-3 px-2">
                            <h1 class="text-3xl font-bold leading-none text-white">
                                <span class="icon text-2xl">‚õèÔ∏è</span>
                                <span class="text">Bir deƒüerli kristal se√ß</span>
                            </h1>
                        </div>
                        <div
                            class="progress-bar relative h-4 w-full bg-black/40 rounded-full overflow-hidden border border-white/5">
                            <div id="progress"
                                class="progress-fill absolute top-0 left-0 h-full bg-primary shadow-[0_0_15px_rgba(43,238,121,0.6)] rounded-full transition-all duration-1000 ease-out"
                                style="width: 0%;">
                                <div class="absolute top-0 right-0 h-full w-1 bg-white/50"></div>
                            </div>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span id="progress-text"
                                    class="progress-text text-[10px] font-bold text-white drop-shadow-md tracking-widest">0/0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Right: Power-ups -->
                    <div class="md:col-span-3 glass-panel rounded-2xl p-4 flex items-center justify-center gap-3">
                        <!-- Power Up 1: Lightning -->
                        <button id="powerup-lightning"
                            class="powerup-btn group relative p-3 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 hover:border-primary/50 transition-all duration-300 active:scale-95">
                            <span
                                class="material-symbols-outlined text-yellow-300 group-hover:drop-shadow-[0_0_8px_rgba(253,224,71,0.8)] transition-all">bolt</span>
                            <span id="count-lightning"
                                class="powerup-count absolute -bottom-1 -right-1 bg-primary text-[#0f0f23] text-[10px] font-bold px-1.5 py-0.5 rounded-full border border-[#0f0f23] hidden">0</span>
                        </button>
                        <!-- Power Up 2: Magnifier -->
                        <button id="powerup-magnifier"
                            class="powerup-btn group relative p-3 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 hover:border-accent-cyan/50 transition-all duration-300 active:scale-95">
                            <span
                                class="material-symbols-outlined text-cyan-300 group-hover:drop-shadow-[0_0_8px_rgba(103,232,249,0.8)] transition-all">search</span>
                            <span id="count-magnifier"
                                class="powerup-count absolute -bottom-1 -right-1 bg-primary text-[#0f0f23] text-[10px] font-bold px-1.5 py-0.5 rounded-full border border-[#0f0f23] hidden">0</span>
                        </button>
                        <!-- Power Up 3: Time -->
                        <button id="powerup-time"
                            class="powerup-btn group relative p-3 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 hover:border-purple-400/50 transition-all duration-300 active:scale-95">
                            <span
                                class="material-symbols-outlined text-purple-300 group-hover:drop-shadow-[0_0_8px_rgba(216,180,254,0.8)] transition-all">schedule</span>
                            <span id="count-time"
                                class="powerup-count absolute -bottom-1 -right-1 bg-primary text-[#0f0f23] text-[10px] font-bold px-1.5 py-0.5 rounded-full border border-[#0f0f23] hidden">0</span>
                        </button>
                        <!-- Power Up 4: Bomb -->
                        <button id="powerup-dynamite"
                            class="powerup-btn group relative p-3 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 hover:border-red-400/50 transition-all duration-300 active:scale-95">
                            <span
                                class="material-symbols-outlined text-red-400 group-hover:drop-shadow-[0_0_8px_rgba(248,113,113,0.8)] transition-all">bomb</span>
                            <span id="count-dynamite"
                                class="powerup-count absolute -bottom-1 -right-1 bg-primary text-[#0f0f23] text-[10px] font-bold px-1.5 py-0.5 rounded-full border border-[#0f0f23] hidden">0</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Main Gameplay Area -->
            <main class="flex-grow flex items-center justify-center p-6 w-full max-w-[1400px] mx-auto relative z-10">
                <!-- Game Board Container -->
                <div
                    class="game-board relative w-full max-w-[1100px] glass-panel rounded-3xl p-6 md:p-8 flex items-center justify-center shadow-2xl">
                    <!-- Decor Elements around board -->
                    <div class="absolute -left-4 top-1/2 -translate-y-1/2 w-2 h-32 bg-white/10 rounded-full blur-[2px]">
                    </div>
                    <div
                        class="absolute -right-4 top-1/2 -translate-y-1/2 w-2 h-32 bg-white/10 rounded-full blur-[2px]">
                    </div>

                    <!-- Grid (Dynamically filled by JS) -->
                    <div id="grid" class="grid-container w-full h-full"></div>
                </div>
            </main>

            <!-- Footer / Controls -->
            <footer class="flex-none p-6 text-center relative z-20">
                <button
                    class="glass-panel px-8 py-3 rounded-full text-white font-medium text-lg hover:bg-white/10 transition-all flex items-center gap-2 mx-auto active:scale-95 border-b-4 border-white/5 hover:border-primary/50">
                    <span class="material-symbols-outlined">pause</span>
                    Men√º
                </button>
            </footer>
        </section>
    </div>

    <!-- Result Modal -->
    <div id="result-modal" class="modal">
        <div class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-[1001]">
            <div
                class="w-full max-w-md bg-gradient-to-br from-[#1a2a2e] via-[#162028] to-[#0f1419] rounded-3xl shadow-2xl overflow-hidden border border-cyan-500/20 relative">

                <!-- Subtle top glow -->
                <div
                    class="absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-cyan-500/10 to-transparent pointer-events-none">
                </div>

                <div class="relative z-10 p-8 text-center space-y-6">
                    <!-- Stars -->
                    <div id="stars-display" class="flex justify-center gap-2 mb-2">
                        <!-- Will be populated by JS with ‚≠ê -->
                    </div>

                    <!-- Title -->
                    <div>
                        <h2 id="modal-title" class="text-3xl font-black text-white mb-2">SEVƒ∞YE TAMAMLANDI</h2>
                        <p class="text-cyan-400 text-sm font-medium">Sekt√∂r 7 Madencilik Tamamlandƒ±</p>
                    </div>

                    <!-- Crystals Mined -->
                    <div class="py-6 border-y border-white/5">
                        <div class="text-xs text-gray-400 uppercase tracking-wider mb-2">Toplanan Kristaller</div>
                        <div class="flex items-center justify-center gap-2">
                            <span class="material-symbols-outlined text-cyan-400 text-4xl">diamond</span>
                            <span id="final-score" class="text-5xl font-black text-white">0</span>
                        </div>
                    </div>

                    <!-- Score Stats -->
                    <div class="grid grid-cols-2 gap-4">
                        <!-- Total Score -->
                        <div class="glass-panel rounded-xl p-4">
                            <div class="text-[10px] text-gray-400 uppercase tracking-wider mb-1">Toplam Skor</div>
                            <div class="text-2xl font-bold text-white mb-1"><span id="total-score">0</span></div>
                            <div
                                class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-500/20 border border-yellow-500/30">
                                <span class="material-symbols-outlined text-yellow-400 text-xs">trending_up</span>
                                <span class="text-[10px] font-bold text-yellow-300">YENƒ∞ REKOR</span>
                            </div>
                        </div>

                        <!-- Time Bonus -->
                        <div class="glass-panel rounded-xl p-4">
                            <div class="text-[10px] text-gray-400 uppercase tracking-wider mb-1">Zaman Bonusu</div>
                            <div class="text-2xl font-bold text-cyan-400 mb-1">+<span id="time-bonus">0</span></div>
                            <div
                                class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-cyan-500/20 border border-cyan-500/30">
                                <span class="material-symbols-outlined text-cyan-400 text-xs">schedule</span>
                                <span class="text-[10px] font-bold text-cyan-300">0:34</span>
                            </div>
                        </div>
                    </div>

                    <!-- New Achievements (if any) -->
                    <div id="new-achievements" class="achievements-unlocked hidden">
                        <!-- Will be populated by JS if there are new achievements -->
                    </div>

                    <!-- XP Earned (hidden in this design but kept for compatibility) -->
                    <div id="earned-xp-container" class="hidden">
                        <span id="earned-xp">0</span>
                    </div>

                    <!-- Retry Button -->
                    <button id="restart-btn"
                        class="w-full py-4 rounded-full bg-cyan-400 hover:bg-cyan-300 text-black font-black text-lg transition-all active:scale-95 flex items-center justify-center gap-2">
                        <span class="material-symbols-outlined">refresh</span>
                        SEVƒ∞YEYƒ∞ TEKRARLA
                    </button>

                    <!-- Bottom Navigation -->
                    <div class="grid grid-cols-2 gap-4 pt-2">
                        <button id="next-level-btn"
                            class="glass-panel rounded-xl p-4 hover:bg-white/10 transition-all flex flex-col items-center gap-2">
                            <span class="material-symbols-outlined text-yellow-400 text-2xl">emoji_events</span>
                            <span class="text-xs font-bold text-gray-300">SIRALAMALAR</span>
                        </button>
                        <button id="menu-btn"
                            class="glass-panel rounded-xl p-4 hover:bg-white/10 transition-all flex flex-col items-center gap-2">
                            <span class="material-symbols-outlined text-gray-400 text-2xl">home</span>
                            <span class="text-xs font-bold text-gray-300">ANA SAYFA</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Achievements Modal -->
    <div id="achievements-modal" class="modal">
        <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[1001]">
            <div
                class="w-full max-w-4xl bg-gradient-to-br from-[#0f0f23] to-[#1a1a2e] rounded-3xl shadow-2xl max-h-[90vh] flex flex-col overflow-hidden border border-white/10">

                <!-- Header -->
                <div class="flex-none p-6 pb-4 border-b border-white/10">
                    <div class="flex items-start justify-between mb-6">
                        <div>
                            <div class="flex items-center gap-2 text-primary mb-2">
                                <span class="material-symbols-outlined text-xl">emoji_events</span>
                                <span class="text-sm font-bold uppercase tracking-wider">≈ûan Salonu</span>
                            </div>
                            <h2 class="text-4xl font-black text-white mb-2">BA≈ûARILAR</h2>
                            <p class="text-gray-400 text-sm">Galaksideki kilometre ta≈ülarƒ±nƒ±zƒ± takip edin. Ba≈üarƒ±larƒ±n
                                kilidini a√ßmak size XP ve nadir kristaller kazandƒ±rƒ±r.</p>
                        </div>

                        <!-- Progress Card -->
                        <div class="glass-panel rounded-2xl p-4 min-w-[200px]">
                            <div class="text-xs text-gray-400 uppercase tracking-wider mb-2">Toplam ƒ∞lerleme</div>
                            <div class="flex items-baseline gap-2 mb-3">
                                <span class="text-3xl font-bold text-white" id="achievements-unlocked">0</span>
                                <span class="text-gray-400">/ <span id="achievements-total">0</span></span>
                            </div>
                            <div class="relative h-2 w-full bg-black/40 rounded-full overflow-hidden">
                                <div id="achievements-progress-bar"
                                    class="h-full bg-primary rounded-full transition-all duration-500"
                                    style="width: 0%"></div>
                            </div>
                            <div class="text-right mt-2">
                                <span id="achievements-percentage" class="text-primary text-sm font-bold">0%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Filter Buttons -->
                    <div class="flex gap-3">
                        <button
                            class="achievement-filter-btn active px-6 py-2 rounded-full font-bold text-sm transition-all"
                            data-filter="all">
                            <span class="material-symbols-outlined text-sm mr-1">grid_view</span>
                            T√ºm√º
                        </button>
                        <button class="achievement-filter-btn px-6 py-2 rounded-full font-bold text-sm transition-all"
                            data-filter="unlocked">
                            <span class="material-symbols-outlined text-sm mr-1">lock_open</span>
                            A√ßƒ±ldƒ±
                        </button>
                        <button class="achievement-filter-btn px-6 py-2 rounded-full font-bold text-sm transition-all"
                            data-filter="locked">
                            <span class="material-symbols-outlined text-sm mr-1">lock</span>
                            Kilitli
                        </button>
                    </div>
                </div>

                <!-- Achievements List -->
                <div class="flex-grow overflow-y-auto p-6 space-y-4" id="achievements-list">
                    <!-- Will be populated by JS -->
                </div>

                <!-- Footer -->
                <div class="flex-none p-6 pt-4 border-t border-white/10 text-center">
                    <button id="close-achievements"
                        class="px-8 py-3 bg-primary hover:bg-primary/80 text-black font-bold rounded-full transition-all active:scale-95">
                        Kapat
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[1001]">
            <div
                class="w-full max-w-2xl bg-gradient-to-br from-[#0f0f23] to-[#1a1a2e] rounded-3xl shadow-2xl max-h-[90vh] flex flex-col overflow-hidden border border-white/10">

                <!-- Header -->
                <div class="flex-none p-6 pb-0 flex items-center justify-between">
                    <h2 class="text-3xl font-black text-white">AYARLAR</h2>
                    <button id="close-settings"
                        class="p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>

                <!-- Tabs -->
                <div class="flex-none px-6 pt-4 pb-2 border-b border-white/10">
                    <div class="flex gap-4">
                        <button class="settings-tab-btn active px-4 py-2 font-bold text-sm transition-all"
                            data-tab="general">
                            GENEL
                        </button>
                        <button class="settings-tab-btn px-4 py-2 font-bold text-sm transition-all" data-tab="controls">
                            KONTROLLER
                        </button>
                        <button class="settings-tab-btn px-4 py-2 font-bold text-sm transition-all" data-tab="account">
                            HESAP
                        </button>
                    </div>
                </div>

                <!-- Content -->
                <div class="flex-grow overflow-y-auto p-6 space-y-6">

                    <!-- AUDIO CONFIGURATION -->
                    <div class="settings-content-section">
                        <h3 class="text-xs font-bold text-yellow-500 uppercase tracking-widest mb-4">Ses Ayarlarƒ±
                        </h3>

                        <!-- Master Volume -->
                        <div class="glass-panel rounded-xl p-4 flex items-center justify-between mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-primary">volume_up</span>
                                </div>
                                <div>
                                    <div class="font-bold text-white">Ana Ses</div>
                                    <div class="text-xs text-gray-400">M√ºzik ve Ortam Sesi</div>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-sound-btn" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <!-- Sound Effects -->
                        <div class="glass-panel rounded-xl p-4 flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-primary">graphic_eq</span>
                                </div>
                                <div>
                                    <div class="font-bold text-white">Ses Efektleri</div>
                                    <div class="text-xs text-gray-400">Madencilik ve Aray√ºz</div>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- GAME GUIDE -->
                    <div class="settings-content-section">
                        <h3 class="text-xs font-bold text-yellow-500 uppercase tracking-widest mb-4">Oyun Rehberi</h3>
                        <div class="grid grid-cols-3 gap-3">
                            <!-- Madencilik Rehberi Kartlarƒ± -->
                            <div
                                class="glass-panel rounded-xl p-4 text-center hover:bg-white/10 transition-all cursor-pointer">
                                <div class="text-3xl mb-2">üíé</div>
                                <div class="text-xs font-bold text-white">Kristal</div>
                                <div class="text-[10px] text-gray-400 mt-1">Asal sayƒ±lar</div>
                            </div>
                            <div
                                class="glass-panel rounded-xl p-4 text-center hover:bg-white/10 transition-all cursor-pointer">
                                <div class="text-3xl mb-2">‚õèÔ∏è</div>
                                <div class="text-xs font-bold text-white">Kaya</div>
                                <div class="text-[10px] text-gray-400 mt-1">Katlar</div>
                            </div>
                            <div
                                class="glass-panel rounded-xl p-4 text-center hover:bg-white/10 transition-all cursor-pointer">
                                <div class="text-3xl mb-2">üî•</div>
                                <div class="text-xs font-bold text-white">Combo</div>
                                <div class="text-[10px] text-gray-400 mt-1">Puan artƒ±≈üƒ±</div>
                            </div>
                        </div>
                    </div>

                    <!-- ACTIVE POWER-UPS -->
                    <div class="settings-content-section">
                        <h3 class="text-xs font-bold text-yellow-500 uppercase tracking-widest mb-4">Aktif
                            G√º√ßlendirmeler
                        </h3>

                        <!-- Lightning -->
                        <div class="glass-panel rounded-xl p-4 flex items-start gap-4 mb-3">
                            <div
                                class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-500/20 to-purple-700/20 border border-purple-500/30 flex items-center justify-center flex-shrink-0">
                                <span class="material-symbols-outlined text-yellow-300">bolt</span>
                            </div>
                            <div class="flex-grow">
                                <div class="font-bold text-white mb-1">Yƒ±ldƒ±rƒ±m</div>
                                <div class="text-xs text-gray-400">Se√ßtiƒüin kristalin t√ºm katlarƒ±nƒ± otomatik toplar.
                                    S√ºre: 60s.</div>
                            </div>
                        </div>

                        <!-- Time Warp -->
                        <div class="glass-panel rounded-xl p-4 flex items-start gap-4">
                            <div
                                class="w-12 h-12 rounded-full bg-gradient-to-br from-amber-500/20 to-amber-700/20 border border-amber-500/30 flex items-center justify-center flex-shrink-0">
                                <span class="material-symbols-outlined text-purple-300">schedule</span>
                            </div>
                            <div class="flex-grow">
                                <div class="font-bold text-white mb-1">Zaman Durdurucu</div>
                                <div class="text-xs text-gray-400">Zamanlayƒ±cƒ±yƒ± 15 saniye dondurur. B√ºy√ºk kombolar i√ßin
                                    harika.</div>
                            </div>
                        </div>

                        <!-- In-game controls (oyun i√ßindeyken g√∂sterilecek) -->
                        <div id="ingame-controls" class="mt-4 space-y-2 hidden">
                            <button id="restart-level-btn"
                                class="w-full px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl font-bold text-white transition-all">
                                üîÑ B√∂l√ºm√º Yeniden Ba≈ülat
                            </button>
                            <button id="main-menu-btn"
                                class="w-full px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl font-bold text-white transition-all">
                                üè† Ana Men√ºye D√∂n
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="flex-none p-6 pt-4 border-t border-white/10 flex items-center justify-between">
                    <div class="text-xs text-gray-500">v1.0.2-beta</div>
                    <div class="flex gap-3">
                        <button class="text-xs text-gray-400 hover:text-white transition-colors">Destek</button>
                        <button class="text-xs text-gray-400 hover:text-red-400 transition-colors">ƒ∞lerlemeyi
                            Sƒ±fƒ±rla</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Teacher Mode Scoreboard Modal -->
    <div id="teacher-scoreboard-modal" class="modal">
        <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[1001]">
            <div
                class="w-full max-w-4xl bg-gradient-to-br from-[#0f0f23] to-[#1a1a2e] rounded-3xl shadow-2xl max-h-[90vh] flex flex-col overflow-hidden border border-white/10">

                <!-- Header -->
                <div class="flex-none p-6 pb-4 border-b border-white/10">
                    <div class="flex items-start justify-between mb-6">
                        <div>
                            <div class="flex items-center gap-2 text-orange-400 mb-2">
                                <span class="material-symbols-outlined text-xl">workspace_premium</span>
                                <span class="text-sm font-bold uppercase tracking-wider">√ñƒüretmen Modu</span>
                            </div>
                            <h2 class="text-4xl font-black text-white mb-2">SKOR TABLOSU</h2>
                            <p class="text-gray-400 text-sm">Mevcut oturumdaki t√ºm oyun skorlarƒ±</p>
                        </div>

                        <!-- Stats Card -->
                        <div class="glass-panel rounded-2xl p-4 min-w-[180px]">
                            <div class="text-xs text-gray-400 uppercase tracking-wider mb-2">Toplam Oyun</div>
                            <div class="flex items-baseline gap-2">
                                <span class="text-3xl font-bold text-white" id="teacher-total-games">0</span>
                                <span class="text-gray-400">oyun</span>
                            </div>
                        </div>
                    </div>

                    <!-- Info Alert -->
                    <div class="glass-panel rounded-xl p-3 flex items-start gap-3 border border-orange-400/20">
                        <span class="material-symbols-outlined text-orange-400 text-xl">info</span>
                        <p class="text-xs text-gray-300 leading-relaxed">
                            Bu skor tablosu ge√ßici bir oturum tablosudur. Tarayƒ±cƒ± kapatƒ±ldƒ±ƒüƒ±nda t√ºm veriler silinir.
                        </p>
                    </div>
                </div>

                <!-- Scoreboard Table -->
                <div class="flex-grow overflow-y-auto p-6">
                    <table class="w-full">
                        <thead class="sticky top-0 bg-[#0f0f23] z-10">
                            <tr
                                class="text-left text-xs text-gray-400 uppercase tracking-wider border-b border-white/10">
                                <th class="pb-3 pr-4">#</th>
                                <th class="pb-3 pr-4">√ñƒürenci Adƒ±</th>
                                <th class="pb-3 pr-4">Skor</th>
                                <th class="pb-3 pr-4">Seviye</th>
                                <th class="pb-3 pr-4">S√ºre</th>
                                <th class="pb-3">Tarih</th>
                            </tr>
                        </thead>
                        <tbody id="teacher-scoreboard-body" class="text-sm">
                            <!-- Will be populated by JavaScript -->
                            <tr>
                                <td colspan="6" class="text-center py-12 text-gray-500">
                                    <span class="material-symbols-outlined text-5xl mb-3 opacity-30">sports_score</span>
                                    <p>Hen√ºz oyun oynanan kayƒ±t yok</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Footer -->
                <div class="flex-none p-6 pt-4 border-t border-white/10 flex items-center justify-between">
                    <button id="teacher-clear-scores"
                        class="px-6 py-2 text-sm font-bold text-red-400 hover:text-red-300 transition-colors">
                        <span class="material-symbols-outlined text-sm mr-1 align-middle">delete</span>
                        Tabloyu Temizle
                    </button>
                    <button id="close-teacher-scoreboard"
                        class="px-8 py-3 bg-primary hover:bg-primary/80 text-black font-bold rounded-full transition-all active:scale-95">
                        Kapat
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Modal (Tutorial) -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content" style="max-width: 400px; z-index: 2000;">
            <h2 id="confirm-title" style="color: var(--accent-gold); margin-bottom: 15px;">ƒ∞PUCU</h2>
            <p id="confirm-message" style="margin: 20px 0; font-size: 1.1rem; line-height: 1.5; color: #eee;"></p>
            <div class="modal-buttons">
                <button id="confirm-yes" class="btn-primary">Kullan ‚úÖ</button>
                <button id="confirm-no" class="btn-secondary">ƒ∞ptal ‚ùå</button>
            </div>
        </div>
    </div>

    <!-- Particle Canvas -->
    <canvas id="particles"></canvas>

    <script src="script.js"></script>
</body>

</html>