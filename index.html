<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1a1a2e">
    <title>ğŸ’ Kristal Madencisi</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="game-container">
        <!-- Start Screen -->
        <section id="start-screen" class="screen active">
            <h1 class="game-title">ğŸ’ Kristal Madencisi</h1>
            <p class="subtitle">DeÄŸerli kristalleri bul ve taÅŸlarÄ± ayÄ±kla!</p>

            <div class="player-info">
                <div class="player-level">
                    <span class="level-badge">Seviye <span id="player-level">1</span></span>
                </div>
                <div class="xp-bar-container">
                    <div class="xp-bar" id="xp-bar"></div>
                    <span class="xp-text" id="xp-text">0 / 100 XP</span>
                </div>
            </div>

            <button id="start-btn" class="btn-primary">â›ï¸ KAZIYA BAÅLA</button>
            <button id="achievements-btn" class="btn-secondary">ğŸ† BAÅARIMLAR</button>
            <button id="settings-btn" class="btn-secondary" style="margin-top: 10px;">âš™ï¸ AYARLAR & Ä°PUÃ‡LARI</button>
        </section>

        <!-- Level Selection -->
        <section id="level-screen" class="screen">
            <h2>ğŸ”ï¸ Maden KatmanlarÄ±</h2>
            <div class="level-grid" id="level-grid"></div>
            <button id="back-btn" class="btn-back">â¬… GERÄ°</button>
        </section>

        <!-- Game Screen -->
        <section id="game-screen" class="screen">
            <!-- Top Panel: Stats, Info, Powerups all in one row -->
            <div class="game-top-panel">
                <div class="panel-section stats-section">
                    <div class="sidebar-header">
                        <button id="ingame-settings-btn" class="icon-btn" title="Ayarlar">âš™ï¸</button>
                        <div id="timer" class="timer">00:00</div>
                    </div>
                    <div class="stats-card">
                        <div class="stat-row">
                            <div id="score-container" class="stat-pill">ğŸ’ <span id="score">0</span></div>
                            <div class="combo-indicator" id="combo">ğŸ”¥ <span id="combo-value">0</span>x</div>
                        </div>
                    </div>
                </div>

                <div class="panel-section mission-section">
                    <div class="mission-card">
                        <div class="card-title">GÃ–REV</div>
                        <div class="mission" id="mission">
                            <span class="icon">â›ï¸</span>
                            <span class="text">Bir deÄŸerli kristal seÃ§</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress"></div>
                            <span class="progress-text" id="progress-text">0/0</span>
                        </div>
                    </div>
                </div>

                <div class="panel-section powerups-section">
                    <div class="powerups-card">
                        <div class="card-title">GÃœÃ‡LENDÄ°RÄ°CÄ°LER</div>
                        <div class="powerups-grid">
                            <button id="powerup-lightning" class="powerup-btn" title="YÄ±ldÄ±rÄ±m">
                                <span class="powerup-icon">âš¡</span>
                                <span class="powerup-count" id="count-lightning">0</span>
                            </button>
                            <button id="powerup-magnifier" class="powerup-btn" title="BÃ¼yÃ¼teÃ§">
                                <span class="powerup-icon">ğŸ”</span>
                                <span class="powerup-count" id="count-magnifier">0</span>
                            </button>
                            <button id="powerup-time" class="powerup-btn" title="Zaman">
                                <span class="powerup-icon">â°</span>
                                <span class="powerup-count" id="count-time">0</span>
                            </button>
                            <button id="powerup-dynamite" class="powerup-btn" title="Dinamit">
                                <span class="powerup-icon">ğŸ’£</span>
                                <span class="powerup-count" id="count-dynamite">0</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Game Board: The Grid -->
            <div class="game-board">
                <div class="grid-container" id="grid"></div>
            </div>
        </section>
    </div>

    <!-- Result Modal -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <h2 id="modal-title">ğŸ‰ KazÄ± TamamlandÄ±!</h2>

            <div class="stars" id="stars-display"></div>

            <div class="achievements-unlocked" id="new-achievements"></div>

            <div class="modal-stats">
                <p>ğŸ’ Kristal: <span id="final-score">0</span></p>
                <p>âœ¨ KazanÄ±lan XP: <span id="earned-xp">0</span></p>
            </div>

            <div class="modal-buttons">
                <button id="next-level-btn" class="btn-primary">Sonraki Katman â¡ï¸</button>
                <button id="restart-btn" class="btn-secondary">ğŸ”„ Tekrar Dene</button>
                <button id="menu-btn" class="btn-back">ğŸ“‹ Ana MenÃ¼</button>
            </div>
        </div>
    </div>

    <!-- Achievements Modal -->
    <div id="achievements-modal" class="modal">
        <div class="modal-content">
            <h2>ğŸ† BaÅŸarÄ±mlar</h2>
            <div id="achievements-list"></div>
            <button id="close-achievements" class="btn-primary">Kapat</button>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content" style="max-width: 450px;">
            <h2>âš™ï¸ Ayarlar & Ä°puÃ§larÄ±</h2>

            <!-- Game Guide Section -->
            <div class="settings-section">
                <h3>ğŸ“– Madencilik Rehberi</h3>
                <div class="tutorial-list">
                    <div class="tutorial-item"
                        style="border-left: 4px solid var(--accent-gold); background: rgba(255, 215, 0, 0.1);">
                        <span class="icon">ğŸ’</span>
                        <div class="desc">
                            <strong>KRÄ°STAL (Asal SayÄ±):</strong>
                            <p style="margin: 5px 0; font-size: 0.9em; color: #ddd;">Sadece 1'e ve kendisine bÃ¶lÃ¼nebilen
                                saf taÅŸlar. (2, 3, 5, 7...)</p>
                            <em style="color: var(--accent-gold);">HEDEF: BunlarÄ± seÃ§!</em>
                        </div>
                    </div>
                    <div class="tutorial-item"
                        style="border-left: 4px solid #aaa; background: rgba(255, 255, 255, 0.05);">
                        <span class="icon">â›ï¸</span>
                        <div class="desc">
                            <strong>KAYA (Katlar):</strong>
                            <p style="margin: 5px 0; font-size: 0.9em; color: #ddd;">SeÃ§tiÄŸin kristalin katlarÄ± olan
                                deÄŸersiz taÅŸlar.</p>
                            <em style="color: #4facfe;">HEDEF: BunlarÄ± patlat!</em>
                        </div>
                    </div>
                </div>
            </div>

            <!-- In-Game Controls -->
            <div id="ingame-controls" class="settings-section"
                style="display: none; flex-direction: column; gap: 10px; margin-bottom: 20px;">
                <button id="restart-level-btn" class="btn-primary" style="width: 100%;">ğŸ”„ BÃ¶lÃ¼mÃ¼ Yeniden
                    BaÅŸlat</button>
                <button id="main-menu-btn" class="btn-secondary" style="width: 100%;">ğŸ  Ana MenÃ¼ye DÃ¶n</button>
            </div>

            <div class="settings-section">
                <h3>ğŸ”Š Ses</h3>
                <button id="toggle-sound-btn" class="btn-secondary">Ses: AÃ‡IK ğŸ”Š</button>
            </div>

            <div class="settings-section">
                <h3>âš¡ GÃ¼Ã§ ArtÄ±rÄ±cÄ±lar</h3>
                <div class="tutorial-list">
                    <div class="tutorial-item">
                        <span class="icon">âš¡</span>
                        <div class="desc">
                            <strong>YÄ±ldÄ±rÄ±m:</strong> SeÃ§tiÄŸin kristalin tÃ¼m katlarÄ±nÄ± otomatik toplar.
                        </div>
                    </div>
                    <div class="tutorial-item">
                        <span class="icon">ğŸ”</span>
                        <div class="desc">
                            <strong>BÃ¼yÃ¼teÃ§:</strong> Bulman gereken bir sonraki en kÃ¼Ã§Ã¼k kristali (asalÄ±) gÃ¶sterir.
                        </div>
                    </div>
                    <div class="tutorial-item">
                        <span class="icon">â°</span>
                        <div class="desc">
                            <strong>Zaman:</strong> SÃ¼reye anÄ±nda +30 saniye ekler.
                        </div>
                    </div>
                    <div class="tutorial-item">
                        <span class="icon">ğŸ’£</span>
                        <div class="desc">
                            <strong>Dinamit:</strong> Hata yapmanÄ± Ã¶nlemek iÃ§in 5 rastgele taÅŸÄ± patlatÄ±r.
                        </div>
                    </div>
                </div>
            </div>

            <button id="close-settings" class="btn-primary" style="margin-top: 20px;">Kapat</button>
        </div>
    </div>

    <!-- Confirm Modal (Tutorial) -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content" style="max-width: 400px; z-index: 2000;">
            <h2 id="confirm-title" style="color: var(--accent-gold); margin-bottom: 15px;">Ä°PUCU</h2>
            <p id="confirm-message" style="margin: 20px 0; font-size: 1.1rem; line-height: 1.5; color: #eee;"></p>
            <div class="modal-buttons">
                <button id="confirm-yes" class="btn-primary">Kullan âœ…</button>
                <button id="confirm-no" class="btn-secondary">Ä°ptal âŒ</button>
            </div>
        </div>
    </div>

    <!-- Particle Canvas -->
    <canvas id="particles"></canvas>

    <script src="script.js"></script>
</body>

</html>